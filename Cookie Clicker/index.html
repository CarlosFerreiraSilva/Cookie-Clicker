<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Cookie Clicker</title>
</head>
<body>

<div class="pai">
    <div style="text-align: center" class="title">
        <h1 id="number" draggable="false">0 cookies</h1>
    </div>
    <br>
    <div  class="cookie">  
        <img id="playImage" class="image" onclick="flyOnePlus(event); bakecookie();" src="images/Cookie-Download-PNG.png" draggable="false">
        <audio id="audio" src="audios/click1.mp3"></audio>
        <audio id="backgroundMusic" src="audios/Art-Of-Silence_V2.mp3"></audio>
    </div>
</div>

<!-- <div class="upgrades">
    <div id="AutoClicker" class="autoclicker">Compre Auto Clicker</div>
    <div id="displayAutoClicker" class="displayAutoClicker">Custa 50 cookies</div>
</div> -->

<div class="audioIcon">
    <img id="pauseButton"  src="images/volume (2).png" alt="" draggable="false">
    <!-- <p id="musicText"></p> -->
</div>


<div id="AutoClicker" class="cardin" style="width: 250px; height: 100%; background-color: transparent;">
<div class="card" style="background-color: white;">
    <h4>AutoClicker</h4>
    <p>Um mouse que clica automaticamente por <p id="displayAutoClicker">50 cookies</p></p>
</div>

</div>


<!-- <div class="card mb-3" style="max-width: 540px;">
    <div class="row g-0">
      <div class="col-md-4">
        <img src="..." class="img-fluid rounded-start" alt="...">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
          <p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
        </div>
      </div>
    </div>
  </div> -->
 
    <script>
        let cookie = 0;
        let cpc = 1;
        
        let autoclicker = document.getElementById('AutoClicker')
        let displayAutoClicker = document.getElementById('displayAutoClicker')

        autoclicker.addEventListener("click", AutoClickerClicked)
        let autoclickers = 0;
        let autoclickercost = 50;
        function AutoClickerClicked(){
            if(cookie >= autoclickercost){
                cookie -= autoclickercost
                displayCookies()
                autoclickers += 1;
                autoclickercost *= 1.3;
                displayAutoClicker.innerHTML = ("<p>Auto Clicker costs" + ' ' + Math.floor(autoclickercost*100) + " cookies<p>")
            }
            else{
                alert("not enough cookies!")
            }
        }

        setInterval(function(){
        cookie = cookie + autoclickers*.1
        displayCookies()
        },100)

        function displayCookies(){
            document.getElementById('number').innerHTML =   Math.floor(cookie*100)/100 + ' ' + "cookies";
        }

        function bakecookie() {
            cookie += cpc;
            displayCookies()
        }

        function flyOnePlus(event) {
            const flyOne = document.createElement('div');
            flyOne.textContent = '1+';
            flyOne.style.position = 'absolute';
            flyOne.style.fontSize = '30px';
            flyOne.style.color = 'white';
            flyOne.style.opacity = '1';
            flyOne.style.fontFamily = 'Merriweather', 'Georgia,serif';
            flyOne.style.userSelect = 'none';
            document.body.appendChild(flyOne);

            // Obtém as coordenadas do clique do usuário
            const clickX = event.clientX;
            const clickY = event.clientY;

            // Define a posição inicial do "1+" com base nas coordenadas do clique do usuário (um pouco mais acima)
            flyOne.style.left = `${clickX}px`;
            flyOne.style.top = `${clickY}px`; // Subtrai 20 pixels para posicionar o "1+" um pouco acima

            const animationDuration = 2500; // 2 segundos (tempo da animação)

            // Função para animar a transição do elemento voando e desaparecendo
            function animateElement() {
                const startTime = performance.now();
                requestAnimationFrame(function animate(time) {
                    let elapsed = time - startTime;
                    let progress = elapsed / animationDuration;

                    // Modifique os valores abaixo para ajustar o caminho de voo do elemento
                    let x = clickX + progress * 200; // Distância horizontal percorrida
                    let y = clickY - Math.pow(progress * 100, 2) + 100; // Distância vertical percorrida (parábola)

                    flyOne.style.left = `${x}px`;
                    flyOne.style.top = `${y - 80}px`;

                    // Modifique o valor abaixo para ajustar a opacidade do elemento durante a animação
                    flyOne.style.opacity = 1 - progress;

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        flyOne.remove(); // Remove o elemento após a animação ser concluída
                    }
                });
            }

            animateElement();
        }
    </script>

    <script type="text/javascript" src="vanilla-tilt.js">
        
    </script>
    <script>
        VanillaTilt.init(document.querySelector(".image"))
    </script>

<script>
    // Obtém referência para a imagem e o elemento de áudio
    const playImage = document.getElementById('playImage');
    const audio = document.getElementById('audio');

    // Adiciona um ouvinte de eventos à imagem para tocar o som quando clicada
    playImage.addEventListener('click', () => {
        
        audio.currentTime = 0;
        audio.play();
    });
</script>

<script>
    const backgroundmusic = document.getElementById('backgroundMusic');
    const image = document.getElementById('pauseButton');
    // const texto = document.getElementById('musicText');
        backgroundmusic.play();
        // texto.innerHTML = "Now Playing Art of Silence";

        // function stopBackgroundAudio(){
        //     backgroundmusic.stopBackgroundAudio();
        // }

       
        // Obtém referência para o botão e o elemento de áudio
        const pauseButton = document.getElementById('pauseButton');
      

        // Adiciona um ouvinte de eventos ao botão para pausar a música quando clicado
        pauseButton.addEventListener('click', () => {
            if (backgroundmusic.paused) {
                backgroundmusic.play(); 
                image.src = "images/volume (2).png";// Caso a música esteja pausada, toca novamente
                // texto.innerHTML = "Now Playing Art of Silence";
                // pauseButton.textContent = 'Pausar Música';
            } else {
                backgroundmusic.pause(); 
                image.src = "images/volume-mute.png";
                // texto.innerHTML = "";// Caso a música esteja tocando, pausa
                // pauseButton.textContent = 'Continuar Música';
            }
        });
    
</script>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script> -->
</body>
</html>